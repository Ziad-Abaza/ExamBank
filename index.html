<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>C# Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script> 
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Tajawal', sans-serif; }
    .glass-card { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
    @keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } }
    .animate-fade-in-down { animation: fade-in-down 0.8s ease-out forwards; }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-purple-950 to-black text-white min-h-screen">

  <header class="text-center py-10 px-4">
    <h1 class="text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500 animate-fade-in-down">C# Quiz</h1> 
    <p class="mt-3 text-sm text-yellow-400 animate-fade-in-down delay-100">Test your knowledge: write your answer first, then check the correct answer.</p>
    <div class="text-center mt-6 w-100 flex gap-4 align-content-center justify-center animate-fade-in-down delay-200">
      <a href="index.html" class="block text-center mt-6 text-indigo-400 hover:text-indigo-200 transition">Home</a>
      <span class="border-l mt-[22px] border-gray-600 h-[30px] flex align-content-center items-center justify-center text-gray-500"></span>
      <a href="tutorial.html" class="block text-center mt-6 text-indigo-400 hover:text-indigo-200 transition">Tutorial</a>
    </div>
  </header>

  <main class="max-w-3xl mx-auto px-4 pb-16 space-y-6">
    <div id="quiz-container" class="space-y-6"></div>

    <div class="flex justify-between items-center mt-8 p-4 glass-card rounded-xl shadow-lg">
      <button id="prev-btn" class="px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded disabled:opacity-40 disabled:cursor-not-allowed transition">Previous</button>
      <span id="page-info" class="text-sm font-medium text-gray-300"></span>
      <button id="next-btn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded transition">Next</button>
    </div>
  </main>

  <footer class="text-center text-xs text-gray-600 py-4">© 2025 EgyTech | All rights reserved</footer>

  <script>
    const QUESTIONS_PER_PAGE = 15;
    let allQuestions = [];
    let currentPage = 0;

    async function loadQuestionsPage(page) {
      if (allQuestions.length === 0) {
        try {
          const response = await fetch('questions.json');
          if (!response.ok) throw new Error("Failed to load questions");
          allQuestions = await response.json();
        } catch (error) {
          document.getElementById("quiz-container").innerHTML = `<div class="bg-red-900/30 text-red-300 p-4 rounded-lg">⚠️ ${error.message}</div>`;
          return;
        }
      }
      renderPage(page);
    }

    function renderPage(page) {
      const container = document.getElementById("quiz-container");
      container.innerHTML = '';

      const start = page * QUESTIONS_PER_PAGE;
      const end = start + QUESTIONS_PER_PAGE;
      const pageQuestions = allQuestions.slice(start, end);

      pageQuestions.forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "glass-card rounded-xl p-5 shadow-lg hover:shadow-indigo-500/20 transition-all duration-300";

        div.innerHTML = `
          <h2 class="font-semibold text-lg mb-3">${start + index + 1}. ${q.question}</h2>
          <input type="text" id="user-answer-${start + index}" placeholder="Type your answer here..." class="w-full p-2 mb-3 rounded text-black">
          <button onclick="showAnswer(this, ${start + index})" class="w-full py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 rounded-lg transition">Show Answer</button>
          <div id="answer-${start + index}" class="mt-4 hidden p-3 bg-gray-800 rounded text-green-300"></div>
        `;
        container.appendChild(div);
      });

      updatePaginationButtons();
    }

    function showAnswer(button, qIndex) {
      const answerDiv = document.getElementById(`answer-${qIndex}`);
      const correctAnswer = allQuestions[qIndex].answer;

      answerDiv.textContent = `Correct Answer: ${correctAnswer}`;
      answerDiv.classList.remove("hidden");
      button.disabled = true;
      button.classList.add("opacity-60");
    }

    function updatePaginationButtons() {
      const totalPages = Math.ceil(allQuestions.length / QUESTIONS_PER_PAGE);
      document.getElementById("page-info").textContent = `Page ${currentPage + 1} of ${totalPages}`;
      document.getElementById("prev-btn").disabled = currentPage === 0;
      document.getElementById("next-btn").disabled = (currentPage + 1) * QUESTIONS_PER_PAGE >= allQuestions.length;
    }

    function goToNextPage() {
      if ((currentPage + 1) * QUESTIONS_PER_PAGE < allQuestions.length) {
        currentPage++;
        renderPage(currentPage);
      }
    }

    function goToPrevPage() {
      if (currentPage > 0) {
        currentPage--;
        renderPage(currentPage);
      }
    }

    window.onload = () => loadQuestionsPage(currentPage);
    document.getElementById("next-btn").addEventListener("click", goToNextPage);
    document.getElementById("prev-btn").addEventListener("click", goToPrevPage);
  </script>
</body>
</html>
