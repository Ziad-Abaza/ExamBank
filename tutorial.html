<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial Library - C# Exam Bank</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <style>
    body {
      font-family: 'Outfit', sans-serif;
      background: radial-gradient(circle at top right, #1e1b4b, #0f172a, #000000);
      color: #f8fafc;
    }

    code,
    pre {
      font-family: 'Fira Code', monospace !important;
      max-width: 100%;
      overflow-x: auto;
      white-space: pre;
      /* Keep code formatting */
    }

    /* Wrap text for non-code elements */
    .answer-content div {
      word-break: break-word;
      overflow-wrap: break-word;
    }

    /* Syntax Highlighting Custom Colors */
    .token.keyword {
      color: #f472b6 !important;
      font-weight: 600;
    }

    /* Pink-ish for Keywords */
    .token.string {
      color: #34d399 !important;
    }

    /* Emerald for Strings */
    .token.function {
      color: #60a5fa !important;
    }

    /* Blue for Built-in/Methods */
    .token.class-name,
    .token.type {
      color: #fbbf24 !important;
    }

    /* Amber for Classes/Types */
    .token.variable,
    .token.property {
      color: #e2e8f0 !important;
    }

    /* Slate for Variables */
    .token.comment {
      color: #64748b !important;
      font-style: italic;
    }

    /* Gray for Comments */
    .token.punctuation {
      color: #94a3b8 !important;
    }

    .token.operator {
      color: #f87171 !important;
    }

    /* Red-ish for Operators */

    .glass-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .topic-card:hover {
      background: rgba(139, 92, 246, 0.05);
      border-color: rgba(139, 92, 246, 0.3);
    }

    @keyframes slide-in {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-slide {
      animation: slide-in 0.3s ease-out forwards;
    }
  </style>
</head>

<body class="min-h-screen">

  <nav class="sticky top-0 z-50 glass-card border-b border-white/10 px-6 py-4 mb-8">
    <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
      <div class="flex items-center gap-3">
        <div
          class="w-10 h-10 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20">
          <i class="fas fa-book-open text-white text-xl"></i>
        </div>
        <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">Knowledge
          Base</h1>
      </div>

      <div class="flex items-center gap-6 text-sm font-medium">
        <a href="index.html" class="text-gray-400 hover:text-white transition-colors">Home</a>
        <a href="tutorial.html" class="text-indigo-400 hover:text-white transition-colors">Tutorial</a>
        <a href="complexity.html" class="text-gray-400 hover:text-white transition-colors">Complexity</a>
      </div>
    </div>
  </nav>

  <main class="max-w-5xl mx-auto px-4 pb-20">
    <header class="mb-12">
      <h2 class="text-4xl font-extrabold mb-4">Interview <span class="text-indigo-500">Cheat Sheet</span></h2>
      <p class="text-gray-400 text-lg">Quick reference for all 600+ questions and answers in our database.</p>
    </header>

    <!-- Search bar -->
    <div class="relative mb-10 group">
      <i
        class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-indigo-500 transition-colors"></i>
      <input type="text" id="search-input" placeholder="Quick find a concept (e.g. 'Middleware', 'LINQ', 'Task')..."
        class="w-full pl-12 pr-4 py-4 rounded-2xl bg-black/40 border border-white/10 focus:border-indigo-500/50 outline-none transition-all text-white">
    </div>

    <div id="tutorial-container" class="flex flex-col gap-6 w-full">
      <div class="flex flex-col items-center justify-center py-20 text-gray-500">
        <i class="fas fa-spinner fa-spin text-3xl mb-4"></i>
        <p>Indexing all questions...</p>
      </div>
    </div>
  </main>

  <footer class="text-center py-12 border-t border-white/5 opacity-50 text-xs">
    Â© 2025 EgyTech | Digital Learning Platform
  </footer>

  <script>
    let allQuestions = [];

    async function loadQuiz() {
      try {
        const response = await fetch('questions.json');
        if (!response.ok) throw new Error("Failed to load content");
        allQuestions = await response.json();
        renderQuestions(allQuestions);
      } catch (error) {
        document.getElementById('tutorial-container').innerHTML = `
          <div class="bg-red-900/20 text-red-400 p-6 rounded-2xl border border-red-500/10 text-center">
            <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
            <p>${error.message}</p>
          </div>`;
      }
    }

    function renderQuestions(questions) {
      const container = document.getElementById('tutorial-container');
      container.innerHTML = '';

      if (questions.length === 0) {
        container.innerHTML = '<p class="text-center py-10 text-gray-500">No matches found for your search.</p>';
        return;
      }

      const fragment = document.createDocumentFragment();
      questions.forEach((q, index) => {
        const div = document.createElement('div');
        div.className = 'glass-card topic-card p-6 rounded-3xl animate-slide w-full';
        div.style.animationDelay = `${Math.min(index * 0.05, 2)}s`;

        div.innerHTML = `
          <div class="flex items-start gap-4 overflow-hidden">
            <div class="bg-indigo-500 text-white w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-bold shadow-lg shadow-indigo-500/20">
              ${index + 1}
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="font-bold text-lg mb-2 text-gray-100 break-words">${q.question}</h3>
              <div class="p-4 bg-black/20 rounded-xl border border-white/5 answer-content overflow-hidden">
                <div class="text-green-400/90 font-medium leading-relaxed whitespace-pre-wrap break-words">${formatAnswer(q.answer)}</div>
              </div>
            </div>
          </div>
        `;
        fragment.appendChild(div);
      });
      container.appendChild(fragment);
      Prism.highlightAllUnder(container);
    }

    function formatAnswer(text) {
      if (isCode(text)) {
        return `<pre class="language-csharp"><code>${escapeHtml(text)}</code></pre>`;
      }
      return text;
    }

    function isCode(text) {
      const codePatterns = [
        /\{[\s\S]*\}/,
        /;\s*$/,
        /\b(public|private|static|class|void|string|int|var|return|new|async|await|using)\b/,
        /=>/,
        /\[.*\]/,
        /\(.*\)\s*\{/
      ];
      if (text.split('\n').length > 1) {
        return codePatterns.some(p => p.test(text));
      }
      return (text.includes(';') && (text.includes('=') || text.includes('('))) ||
        (text.includes('{') && text.includes('}')) ||
        /^[a-zA-Z<>\[\]]+\s+[a-zA-Z]+\s*\(.*\)/.test(text) ||
        /^(app|builder|Console|File|FileStream)\./.test(text);
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    document.getElementById('search-input').addEventListener('input', (e) => {
      const term = e.target.value.toLowerCase();
      const filtered = allQuestions.filter(q =>
        q.question.toLowerCase().includes(term) ||
        q.answer.toLowerCase().includes(term)
      );
      renderQuestions(filtered);
    });

    window.onload = loadQuiz;
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
</body>

</html>