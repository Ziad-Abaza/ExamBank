<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>تعقيد الوقت - بنك الأسئلة</title>
  <meta name="description"
    content="Challenge yourself with time complexity problems. Learn Big O notation through interactive code examples and explanations.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&family=Outfit:wght@400;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background: radial-gradient(circle at top left, #1e1b4b, #0f172a, #000000);
      color: #f8fafc;
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    pre {
      direction: ltr;
      text-align: left;
      font-family: 'Fira Code', monospace;
      background: rgba(0, 0, 0, 0.3);
      padding: 1.5rem;
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
      margin-bottom: 1.5rem;
      overflow-x: auto;
    }

    .option-btn {
      transition: all 0.2s ease;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .option-btn:hover {
      background: rgba(139, 92, 246, 0.1);
      border-color: rgba(139, 92, 246, 0.5);
    }

    .option-btn.selected {
      background: rgba(139, 92, 246, 0.3);
      border-color: #8b5cf6;
      box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
    }

    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade {
      animation: fade-in 0.4s ease-out forwards;
    }
  </style>
</head>

<body class="min-h-screen">

  <nav class="sticky top-0 z-50 glass-card border-b border-white/10 px-6 py-4 mb-8">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <div class="flex items-center gap-3">
        <div
          class="w-10 h-10 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center">
          <i class="fas fa-bolt text-white text-xl"></i>
        </div>
        <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">Time
          Complexity</h1>
      </div>

      <div class="flex items-center gap-6 text-sm font-medium" dir="ltr">
        <a href="index.html" class="text-gray-400 hover:text-white transition-colors">Home</a>
        <a href="tutorial.html" class="text-gray-400 hover:text-white transition-colors">Tutorial</a>
        <a href="complexity.html" class="text-indigo-400 hover:text-white transition-colors">Complexity</a>
      </div>
    </div>
  </nav>

  <main class="max-w-3xl mx-auto px-4 pb-20">
    <header class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">اختبر معلوماتك في <span class="text-indigo-500">التعقيد
          الزمني</span></h2>
      <p class="text-gray-400">حل المسائل البرمجية وحدد Big O notation لكل دالة.</p>
    </header>

    <div id="quiz-container" class="space-y-8"></div>

    <div class="flex justify-between items-center mt-12 p-6 glass-card rounded-3xl" dir="ltr">
      <button id="prev-btn"
        class="px-6 py-3 bg-white/5 hover:bg-white/10 rounded-xl disabled:opacity-20 transition-all font-bold">
        <i class="fas fa-arrow-left mr-2"></i> Previous
      </button>
      <span id="page-info" class="text-indigo-400 font-bold tracking-widest text-sm"></span>
      <button id="next-btn"
        class="px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl disabled:opacity-20 transition-all font-bold shadow-lg">
        Next <i class="fas fa-arrow-right ml-2"></i>
      </button>
    </div>
  </main>

  <script>
    const QUESTIONS_PER_PAGE = 5;
    const allQuestions = [
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question1(n):\n    for i in range(n):\n        print(i)",
        options: ["O(1)", "O(log n)", "O(n)", "O(n²)"],
        correct: 2,
        explanation: "لأن الدالة تنفذ حلقة واحدة فقط تزداد خطيًا مع n."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question2(n):\n    for i in range(n):\n        for j in range(n):\n            print(i, j)",
        options: ["O(1)", "O(log n)", "O(n)", "O(n²)"],
        correct: 3,
        explanation: "لأن هناك حلقتين متداخلتين، وكل منهما تعتمد على n، مما يعطي n * n."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question3(n):\n    if n <= 1:\n        return\n    question3(n // 2)\n    print(n)",
        options: ["O(log n)", "O(n)", "O(n log n)", "O(n²)"],
        correct: 0,
        explanation: "لأنها دالة تكرارية تقلل n إلى النصف في كل مرة (Binary Search logic)."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question4(n):\n    i = 1\n    while i < n:\n        i *= 2",
        options: ["O(log n)", "O(n)", "O(n log n)", "O(n²)"],
        correct: 0,
        explanation: "لأن المتغير i يتضاعف في كل خطوة، مما يعني عدد خطوات لوغاريتمي."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question5(n):\n    arr = [0] * n\n    for i in range(n):\n        arr[i] = i",
        options: ["O(1)", "O(n)", "O(n²)", "O(log n)"],
        correct: 1,
        explanation: "تحتاج الحلقة للمرور على جميع العناصر من 0 إلى n."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question6(n):\n    for i in range(n):\n        print(i)\n    for j in range(n):\n        print(j)",
        options: ["O(1)", "O(n)", "O(n²)", "O(n log n)"],
        correct: 1,
        explanation: "الحلقتين متتاليتين وليستا متداخلتين، لذا O(n + n) = O(n)."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question7(n):\n    for i in range(n):\n        for j in range(i, n):\n            print(i, j)",
        options: ["O(n)", "O(n log n)", "O(n²)", "O(log n)"],
        correct: 2,
        explanation: "الحلقة الداخلية تقل تدريجياً، لكن المجموع الإجمالي يظل يتناسب مع n²."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question8(n):\n    i = 1\n    while i < n:\n        i += 1",
        options: ["O(1)", "O(log n)", "O(n)", "O(n²)"],
        correct: 2,
        explanation: "الزيادة بمقدار واحد حتى الوصول لـ n تأخذ وقتاً خطياً."
      },
      {
        question: "ما هو التعقيد الزمني للدالة التالية؟",
        code: "def question9(n):\n    for i in range(n):\n        for j in range(n):\n            print(i)\n        print('done')",
        options: ["O(n)", "O(n²)", "O(log n)", "O(n log n)"],
        correct: 1,
        explanation: "حلقتين متداخلتين تعتمدان على n."
      },
      {
        question: "ما هو التعقيد الزمني لهذه الدالة؟",
        code: "def question18(n):\n    if n <= 1:\n        return 1\n    return question18(n-1) * question18(n-1)",
        options: ["O(2ⁿ)", "O(n)", "O(log n)", "O(n²)"],
        correct: 0,
        explanation: "كل استدعاء يولد استدعائين، مما يضاعف العمل في كل مستوى."
      }
    ];

    let currentPage = 0;

    function renderPage(page) {
      currentPage = page;
      const container = document.getElementById("quiz-container");
      container.innerHTML = "";

      const start = page * QUESTIONS_PER_PAGE;
      const end = Math.min(start + QUESTIONS_PER_PAGE, allQuestions.length);
      const questions = allQuestions.slice(start, end);

      questions.forEach((q, i) => {
        const qIdx = start + i;
        const div = document.createElement("div");
        div.className = "glass-card rounded-3xl p-8 animate-fade";

        let optionsHtml = q.options.map((opt, optIdx) => `
          <button onclick="handleSelect(${qIdx}, ${optIdx})" 
                  id="q${qIdx}-opt${optIdx}" 
                  class="option-btn w-full p-4 rounded-xl text-right flex justify-between items-center mb-2">
            <span>${opt}</span>
            <span class="text-gray-500 font-bold opacity-30">${String.fromCharCode(65 + optIdx)}</span>
          </button>
        `).join('');

        div.innerHTML = `
          <div class="mb-6">
            <span class="text-indigo-400 font-bold">مسألة #${qIdx + 1}</span>
            <h3 class="text-xl font-bold mt-2">${q.question}</h3>
          </div>
          <pre><code>${q.code}</code></pre>
          <div class="space-y-3 mb-6">${optionsHtml}</div>
          <button onclick="checkAnswer(${qIdx})" id="check-${qIdx}" 
                  class="w-full py-4 bg-white/5 hover:bg-white/10 rounded-xl font-bold transition-all border border-white/10">
            تحقق من الإجابة
          </button>
          <div id="result-${qIdx}" class="hidden mt-6 p-6 rounded-2xl border"></div>
        `;
        container.appendChild(div);
      });

      updatePagination();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    const userChoices = {};

    function handleSelect(qIdx, optIdx) {
      const parent = document.getElementById(`q${qIdx}-opt${optIdx}`).parentElement;
      parent.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
      document.getElementById(`q${qIdx}-opt${optIdx}`).classList.add('selected');
      userChoices[qIdx] = optIdx;
    }

    function checkAnswer(qIdx) {
      if (userChoices[qIdx] === undefined) {
        alert("الرجاء اختيار إجابة أولاً!");
        return;
      }

      const q = allQuestions[qIdx];
      const selected = userChoices[qIdx];
      const resultDiv = document.getElementById(`result-${qIdx}`);
      const checkBtn = document.getElementById(`check-${qIdx}`);

      resultDiv.classList.remove('hidden');
      checkBtn.disabled = true;
      checkBtn.classList.add('opacity-50');

      if (selected === q.correct) {
        resultDiv.className = "mt-6 p-6 rounded-2xl bg-green-500/10 border-green-500/20 text-green-400";
        resultDiv.innerHTML = `<h4 class="font-bold flex items-center gap-2"><i class="fas fa-check-circle"></i> إجابة صحيحة!</h4><p class="mt-2 text-sm">${q.explanation}</p>`;
      } else {
        resultDiv.className = "mt-6 p-6 rounded-2xl bg-red-500/10 border-red-500/20 text-red-400";
        resultDiv.innerHTML = `<h4 class="font-bold flex items-center gap-2"><i class="fas fa-times-circle"></i> خطأ!</h4><p class="mt-2 text-sm">الإجابة الصحيحة هي: ${q.options[q.correct]}. ${q.explanation}</p>`;
      }
    }

    function updatePagination() {
      const totalPages = Math.ceil(allQuestions.length / QUESTIONS_PER_PAGE);
      document.getElementById("page-info").textContent = `Page ${currentPage + 1} / ${totalPages}`;
      document.getElementById("prev-btn").disabled = currentPage === 0;
      document.getElementById("next-btn").disabled = (currentPage + 1) * QUESTIONS_PER_PAGE >= allQuestions.length;
    }

    document.getElementById("next-btn").addEventListener("click", () => renderPage(currentPage + 1));
    document.getElementById("prev-btn").addEventListener("click", () => renderPage(currentPage - 1));

    window.onload = () => renderPage(0);
  </script>
</body>

</html>